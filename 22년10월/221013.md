# 💻 프로젝트 3일차

### Plan component script

- 스크립트 작업을 시작하였다.
- class 기반으로 컴포넌트를 만들고 루트를 호출하여 가상돔을 만들고 렌더하는 방식을 선택하였다.
- drag & drap을 구현하는 것을 고민하며 높이 계산 부분을 인라인으로 넣었는데 나중에 개선해야할 듯

# 🌟 SPA (Single Page Application)

- 전통적인 방식의 화면 전환이 아닌 필요 부분만을 ajax를 통해 요청하고 응답 받아 일부만을 다시 그려내 서버 트래픽을 최소화할 수 있고 불필요한 렌더링을 하지 않는다.
- 단점은 첫 요청때 모든 리소스를 받아와야 하므로 초기 로딩 속도가 느려질 수 있다는 것이다. 또한 빈 루트에 자바스크립트로 그려내고 페이지의 url이 변경되지 않아 사용자 방문 history를 관리할 수 없고 SEO에 검색되지 않는 문제도 있다.

---

# 🌟 Routing

- route란 노선을 잇는 경로의 의미를 가진다. 어플리케이션의 라우팅은 화면을 전환하는 내비게이션을 관리하기 위한 기능을 의미한다.
- 사용자가 요청한 url 또는 이벤트를 해석하여 새로운 페이지로 전환하기 위한 데이터를 서버에게 요청하고 페이지를 전환하는 행위를 말한다.
- 주소창에 url 입력, a 태그를 이용한 페이지 이동, 브라우저의 이전 다음 버튼을 이용한 전환이 있고 방문 기록을 관리하기 위해서는 각 페이지는 유일한 url을 소유해야 한다.

---

# 🌟 SPA와 Routing

- **전통적인 링크 방식**은 a태그 등 link 태그를 사용하여 href 어트리뷰트의 값 (url)이 주소창에 나타나고 해당 url로 서버에 요청을 보내 온전한 html 리소스를 응답한다. 이를 서버 사이드 렌더링이라 한다. 브라우저는 완성된 html을 응답받아 전체 페이지를 다시 렌더링하게 되므로 새로고침이 발생한다.
- **ajax 방식**은 화면이 전환될 때마다 새로운 리소스를 요청하고 중복된 부분도 다시 렌더링 되는 문제가 있어 이를 보완하기 위해 등작한 비동기 데이터 통신 방식을 의미한다. ajax의 요청은 주소창의 url을 변경시키지 않아 history의 관리가 동작하지 않는다. 따라서 SEO 이슈가 발생하고 새로고침 시 기존에 보여지던 페이지가 아닌 루트 페이지가 요청된다.
- **Hash 방식**은 ajax 방식에서의 단점인 history 관리가 되지 않는 것을 보완한 방식이다. URI의 fragment identifier의 고유 기능인 앵커를 사용한다. 링크 태그에 hash(#)를 사용하여 내비게이션이 클릭되면 hash가 추가된 uri가 주소창에 표시되고, hash만 변경되면 브라우저는 서버에 요청을 하지 않는다. 해시는 요청을 위한 것이 아니라 웹 페이지 내부에서의 이동을 위한 것이기 때문이다. 이를 사용해 페이지가 갱신되지는 않지만 고유의 url이 존재하므로 history 관리가 가능하다. hashchange 이벤트를 사용하여 변경을 감지하고 취득하여 ajax를 실행한다. 하지만 이 방식 또한 SEO의 웹 크롤러가 자바스크립트가 실행되지 않은 상태의 페이지를 크롤링 하므로 해당 페이지의 콘텐츠를 수집할 수 없는 문제가 있다. 구글은 이를 해결하여 크롤링이 가능하지만 다른 검색 엔진은 수집할 수 없을 수 있다고 한다.
- **pjax 방식**은 HTML5의 History API인 pushState와 popstate 이벤트를 사용한 방식이다. path를 사용하여 기본 동작을 막고 ajax요청을 할 때 url이 바뀌지 않는 문제를 pushState 메서드를 사용하여 주소창의 URL을 변경하고 URL을 history entry로 추가하지만 서버로의 요청을 하지 않는다. 링크 태그의 href 속성을 가져와 현재 페이지와 비교하여 같으면 이동하지 않게 구현하고, 다르다면 window.history.pushState() 메서드를 통해 요청은 막고 주소만 변경하는 방법을 사용한다.

# 🤯 하루를 마치며…

클래스 내부에서 비동기 데이터를 가지고 렌더를 하는 과정에서 아주 큰일난 것 같다………………………해결하기 위해 이래저래 알아보는 중이고 구현해야할 기능이 생각보다 너무 많아서 시간에 쫒기는 중이다 ㅠㅠ 최대한 학습에 목표를 두고 어려움을 해결해나가며 배우는 것이 우선이지만 답답한 마음은 어쩔 수 없는 것 같다….남은 시간을 잘 활용하여 최대한 완성도가 높은 상태로 마무리할 수 있도록 남은 날도 열심히 해야겠다!
